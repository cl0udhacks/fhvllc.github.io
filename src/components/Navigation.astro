---
// Navigation component for Fairy Hill Ventures
// Includes responsive menu, theme toggle, and smooth animations
---

<header id="main-header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
  <nav class="container-custom">
    <div class="flex items-center justify-between h-20">
      <!-- Logo -->
      <a href="/" class="flex items-center gap-3 group">
        <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-primary-500 to-accent-500 flex items-center justify-center text-white font-bold text-lg group-hover:scale-105 transition-transform">
          FH
        </div>
        <span class="text-xl font-semibold text-[var(--text-primary)] hidden sm:block">
          Fairy Hill <span class="gradient-text">Ventures</span>
        </span>
      </a>

      <!-- Desktop Navigation -->
      <div class="hidden lg:flex items-center gap-8">
        <a href="#about" class="nav-link">About</a>
        <a href="#thesis" class="nav-link">Investment Thesis</a>
        <a href="#portfolio" class="nav-link">Portfolio</a>
        <a href="#contact" class="nav-link">Contact</a>
      </div>

      <!-- Right Side: Theme Toggle + CTA -->
      <div class="flex items-center gap-4">
        <!-- Theme Toggle -->
        <button
          id="theme-toggle"
          class="p-2.5 rounded-xl bg-[var(--bg-tertiary)] hover:bg-[var(--border-color)] transition-colors"
          aria-label="Toggle dark mode"
        >
          <!-- Sun Icon (shown in dark mode) -->
          <svg class="w-5 h-5 text-[var(--text-secondary)] hidden dark:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
          </svg>
          <!-- Moon Icon (shown in light mode) -->
          <svg class="w-5 h-5 text-[var(--text-secondary)] block dark:hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
          </svg>
        </button>

        <!-- CTA Button (Desktop) -->
        <a href="#contact" class="hidden md:inline-flex btn btn-primary text-sm">
          Get in Touch
        </a>

        <!-- Mobile Menu Button -->
        <button
          id="mobile-menu-btn"
          class="lg:hidden p-2 rounded-xl bg-[var(--bg-tertiary)] hover:bg-[var(--border-color)] transition-colors"
          aria-label="Toggle menu"
          aria-expanded="false"
        >
          <svg class="w-6 h-6 text-[var(--text-secondary)]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path id="menu-open-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            <path id="menu-close-icon" class="hidden" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Navigation Menu -->
    <div id="mobile-menu" class="lg:hidden hidden overflow-hidden">
      <div class="py-4 border-t border-[var(--border-color)]">
        <div class="flex flex-col gap-2">
          <a href="#about" class="mobile-nav-link">About</a>
          <a href="#thesis" class="mobile-nav-link">Investment Thesis</a>
          <a href="#portfolio" class="mobile-nav-link">Portfolio</a>
          <a href="#contact" class="mobile-nav-link">Contact</a>
          <a href="#contact" class="btn btn-primary text-sm mt-4 w-full justify-center">
            Get in Touch
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>

<style>
  #main-header {
    background: var(--bg-secondary);
    border-bottom: 1px solid transparent;
  }

  #main-header.scrolled {
    background: var(--bg-secondary);
    border-bottom-color: var(--border-color);
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1);
  }

  .dark #main-header {
    background: rgba(2, 6, 23, 0.9);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }

  .dark #main-header.scrolled {
    background: rgba(2, 6, 23, 0.95);
  }

  .nav-link {
    position: relative;
    color: var(--text-secondary);
    font-weight: 500;
    font-size: 0.9375rem;
    padding: 0.5rem 0;
    transition: color 0.2s ease;
  }

  .nav-link:hover {
    color: var(--text-primary);
  }

  .nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: linear-gradient(135deg, var(--color-primary-500), var(--color-accent-500));
    border-radius: 1px;
    transition: width 0.3s ease;
  }

  .nav-link:hover::after {
    width: 100%;
  }

  .mobile-nav-link {
    display: block;
    padding: 0.875rem 1rem;
    color: var(--text-secondary);
    font-weight: 500;
    border-radius: 0.75rem;
    transition: all 0.2s ease;
  }

  .mobile-nav-link:hover {
    color: var(--text-primary);
    background: var(--bg-tertiary);
  }
</style>

<script>
  // Theme Toggle
  const themeToggle = document.getElementById('theme-toggle');
  const html = document.documentElement;

  // Check for saved theme preference or system preference
  const getThemePreference = () => {
    if (localStorage.getItem('theme')) {
      return localStorage.getItem('theme');
    }
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  };

  // Apply theme
  const applyTheme = (theme: string) => {
    if (theme === 'dark') {
      html.classList.add('dark');
    } else {
      html.classList.remove('dark');
    }
    localStorage.setItem('theme', theme);
  };

  // Initialize theme
  applyTheme(getThemePreference() || 'light');

  // Toggle theme on button click
  themeToggle?.addEventListener('click', () => {
    const currentTheme = html.classList.contains('dark') ? 'dark' : 'light';
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    applyTheme(newTheme);
  });

  // Listen for system theme changes
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
    if (!localStorage.getItem('theme')) {
      applyTheme(e.matches ? 'dark' : 'light');
    }
  });

  // Mobile Menu Toggle
  const mobileMenuBtn = document.getElementById('mobile-menu-btn');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuOpenIcon = document.getElementById('menu-open-icon');
  const menuCloseIcon = document.getElementById('menu-close-icon');

  mobileMenuBtn?.addEventListener('click', () => {
    const isOpen = mobileMenu?.classList.contains('hidden') === false;

    if (isOpen) {
      mobileMenu?.classList.add('hidden');
      menuOpenIcon?.classList.remove('hidden');
      menuCloseIcon?.classList.add('hidden');
      mobileMenuBtn.setAttribute('aria-expanded', 'false');
    } else {
      mobileMenu?.classList.remove('hidden');
      menuOpenIcon?.classList.add('hidden');
      menuCloseIcon?.classList.remove('hidden');
      mobileMenuBtn.setAttribute('aria-expanded', 'true');
    }
  });

  // Close mobile menu when clicking nav links
  const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
  mobileNavLinks.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
      menuOpenIcon?.classList.remove('hidden');
      menuCloseIcon?.classList.add('hidden');
      mobileMenuBtn?.setAttribute('aria-expanded', 'false');
    });
  });

  // Header scroll effect
  const header = document.getElementById('main-header');
  let lastScroll = 0;

  window.addEventListener('scroll', () => {
    const currentScroll = window.scrollY;

    if (currentScroll > 50) {
      header?.classList.add('scrolled');
    } else {
      header?.classList.remove('scrolled');
    }

    lastScroll = currentScroll;
  });
</script>
